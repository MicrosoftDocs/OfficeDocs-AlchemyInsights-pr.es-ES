---
title: Problemas con tokens
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/15/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7774"
- "9004351"
ms.openlocfilehash: 14a9681c08920094813497e7a75eb87bb0733cbc
ms.sourcegitcommit: e378232f4c9ef4e962208100db752221e7bd2dd6
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/20/2021
ms.locfileid: "49912037"
---
# <a name="issues-with-tokens"></a><span data-ttu-id="83860-102">Problemas con tokens</span><span class="sxs-lookup"><span data-stu-id="83860-102">Issues with tokens</span></span>

<span data-ttu-id="83860-103">Para administrar problemas relacionados con tokens, puede dar los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="83860-103">To manage issues related to tokens, you can perform the following steps:</span></span>

1. <span data-ttu-id="83860-104">Puede especificar la duración de un token de acceso, de SAML o de Id. emitido por la Plataforma de identidad de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="83860-104">You can specify the lifetime of an access, ID, or SAML token issued by Microsoft identity platform.</span></span> <span data-ttu-id="83860-105">Establezca la vigencia de los tokens de todas las aplicaciones de su organización, de una aplicación de varios inquilinos (de varias organizaciones) o de una entidad de servicio de seguridad de la organización.</span><span class="sxs-lookup"><span data-stu-id="83860-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span> <span data-ttu-id="83860-106">Para más información, consulte [Vigencia de tokens configurable en la Plataforma de identidad de Microsoft (vista previa)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span><span class="sxs-lookup"><span data-stu-id="83860-106">For more information, see [Configurable token lifetimes in Microsoft identity platform (preview)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span></span>
2. <span data-ttu-id="83860-107">Los tokens de acceso permiten a los clientes llamar con seguridad API web protegidas y las API web los utilizan para realizar la autorización y autenticación.</span><span class="sxs-lookup"><span data-stu-id="83860-107">Access tokens enable clients to securely call protected web APIs, and are used by web APIs to perform authentication and authorization.</span></span> <span data-ttu-id="83860-108">En conformidad con la especificación OAuth, los tokens de acceso son cadenas opacas sin formato establecido; algunos proveedores de identidad (IDP) utilizan GUID, otros emplean blobs cifrados.</span><span class="sxs-lookup"><span data-stu-id="83860-108">As per the OAuth specification, access tokens are opaque strings without a set format - some identity providers (IDPs) use GUIDs, others use encrypted blobs.</span></span> <span data-ttu-id="83860-109">La Plataforma de identidad de Microsoft usa una variedad de formatos de token de acceso, en función de la configuración de la API que acepte el token.</span><span class="sxs-lookup"><span data-stu-id="83860-109">The Microsoft identity platform uses a variety of access token formats, depending on the configuration of the API that accepts the token.</span></span> <span data-ttu-id="83860-110">Para aprender cómo su API puede validar y usar las notificaciones dentro de un token de acceso, consulte [Token de acceso de la Plataforma de identidad de Microsoft](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).</span><span class="sxs-lookup"><span data-stu-id="83860-110">To learn how your API can validate and use the claims inside an access token, see [Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).</span></span>
3. <span data-ttu-id="83860-111">La Biblioteca de autenticación de Microsoft (MSAL) admite varios flujos de autenticación para usarlos en diferentes escenarios de aplicación.</span><span class="sxs-lookup"><span data-stu-id="83860-111">The Microsoft Authentication Library (MSAL) supports several authentication flows for use in different application scenarios.</span></span> <span data-ttu-id="83860-112">Para más información, consulte [Flujos de autenticación](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span><span class="sxs-lookup"><span data-stu-id="83860-112">For more information, see [Authentication flows](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span></span>
4. <span data-ttu-id="83860-113">La concesión del código de autorización OAuth 2.0 puede usarse en aplicaciones que estén instaladas en un dispositivo para obtener acceso a recursos protegidos, tales como API web.</span><span class="sxs-lookup"><span data-stu-id="83860-113">The OAuth 2.0 authorization code grant can be used in apps that are installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="83860-114">Si usa la implementación de OAuth 2.0 de la Plataforma de identidad de Microsoft, puede agregar inicio de sesión y acceso de API a sus aplicaciones de escritorio y de dispositivo móvil.</span><span class="sxs-lookup"><span data-stu-id="83860-114">Using the Microsoft identity platform implementation of OAuth 2.0, you can add sign-in and API access to your mobile and desktop apps.</span></span> <span data-ttu-id="83860-115">Consulte el [Flujo del código de autorización de OAuth 2.0 y la Plataforma de identidad de Microsoft](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) para aprender a programar directamente contra el protocolo en su aplicación, en cualquier idioma.</span><span class="sxs-lookup"><span data-stu-id="83860-115">See [Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) for how to program directly against the protocol in your application, using any language.</span></span>
5. <span data-ttu-id="83860-116">OpenID Connect (OIDC) es un protocolo de autenticación creado en OAuth 2.0 que puede usar para que un usuario inicie sesión en una aplicación de manera segura.</span><span class="sxs-lookup"><span data-stu-id="83860-116">OpenID Connect (OIDC) is an authentication protocol built on OAuth 2.0 that you can use to securely sign in a user to an application.</span></span> <span data-ttu-id="83860-117">Al usar la implementación de OpenID Connect del punto de conexión de la Plataforma de identidad de Microsoft, puede agregar inicio de sesión y acceso de API a sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="83860-117">When you use the Microsoft identity platform endpoint's implementation of OpenID Connect, you can add sign-in and API access to your apps.</span></span> <span data-ttu-id="83860-118">El [Protocolo de OpenID Connect y la Plataforma de identidad de Microsoft](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) muestra cómo hacer esto sin importar el idioma y describe cómo enviar y recibir mensajes de HTTP sin usar ninguna biblioteca de fuente abierta de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="83860-118">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) shows how to do this independent of language and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>
    - <span data-ttu-id="83860-119">El punto de conexión UserInfo forma parte del estándar OIDC, diseñado para devolver notificaciones sobre el usuario que ha realizado la autenticación.</span><span class="sxs-lookup"><span data-stu-id="83860-119">The UserInfo endpoint is part of the OIDC standard, designed to return claims about the user that authenticated.</span></span> <span data-ttu-id="83860-120">Para más información, consulte [Punto de conexión UserInfo de la Plataforma de identidad de Microsoft](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span><span class="sxs-lookup"><span data-stu-id="83860-120">For more information, see [Microsoft identity platform UserInfo endpoint](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span></span>
    - <span data-ttu-id="83860-121">Este ejemplo de [llamada a una API web en una aplicación web mediante Azure AD y OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) muestra cómo crear una aplicación web de MVC que use Azure AD para iniciar sesión con el protocolo OpenID Connect y, después, realizar llamadas a una API web con la identidad del usuario que inició sesión mediante tokens obtenidos con OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="83860-121">The [Calling a web API in a web app using Azure AD and OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) sample shows how to build an MVC web application that uses Azure AD for sign-in using the OpenID Connect protocol, and then call a web API under the signed-in user's identity using tokens obtained via OAuth 2.0.</span></span> <span data-ttu-id="83860-122">En este ejemplo, se usa el software intermedio de ASP .NET OWIN de OpenID Connect y ADAL .NET.</span><span class="sxs-lookup"><span data-stu-id="83860-122">This sample uses the OpenID Connect ASP .Net OWIN middleware and ADAL .Net.</span></span>
6. <span data-ttu-id="83860-123">[Configurar una aplicación para exponer una API web](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis): en esta guía de inicio rápido, puede registrar una API web con la Plataforma de identidad de Microsoft y exponerla a aplicaciones del cliente al agregar un ámbito de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="83860-123">[Configure an application to expose a web API](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis) - In this quickstart, you register a web API with the Microsoft identity platform and expose it to client apps by adding an example scope.</span></span> <span data-ttu-id="83860-124">Al registrar su API web y exponerla mediante ámbitos, puede proporcionar acceso basado en permisos a sus recursos a usuarios autorizados y a aplicaciones cliente que acceden a su API.</span><span class="sxs-lookup"><span data-stu-id="83860-124">By registering your web API and exposing it through scopes, you can provide permissions-based access to its resources to authorized users and client apps that access your API.</span></span>
7. <span data-ttu-id="83860-125">En Azure Active Directory B2C (Azure AD B2C), el flujo de credenciales de contraseña del propietario del recurso (ROPC) es un flujo OAuth de autenticación estándar.</span><span class="sxs-lookup"><span data-stu-id="83860-125">In Azure Active Directory B2C (Azure AD B2C), the resource owner password credentials (ROPC) flow is an OAuth standard authentication flow.</span></span> <span data-ttu-id="83860-126">En este flujo, una aplicación, también conocida como el usuario de confianza, intercambia credenciales válidos por tokens.</span><span class="sxs-lookup"><span data-stu-id="83860-126">In this flow, an application, also known as the relying party, exchanges valid credentials for tokens.</span></span> <span data-ttu-id="83860-127">Las credenciales incluyen una Id. de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="83860-127">The credentials include a user ID and password.</span></span> <span data-ttu-id="83860-128">Los tokens devueltos son un token de Id, de acceso y de actualización.</span><span class="sxs-lookup"><span data-stu-id="83860-128">The tokens returned are an ID token, access token, and a refresh token.</span></span> <span data-ttu-id="83860-129">Para más información, consulte [Establecer un flujo de credenciales de contraseña del propietario del recurso en Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span><span class="sxs-lookup"><span data-stu-id="83860-129">For more information, see [Set up a resource owner password credentials flow in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span></span> 

